<!DOCTYPE html>
<html lang="ja">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eBayè¨ˆç®—</title>

    <style>

    /* è²©å£²ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®é¸æŠã‚¹ã‚¿ã‚¤ãƒ« */
    select#platform {
    width: 100%;
    padding: 8px;
    margin-top: 10px;
    border: 1px solid #ffc0cb;
    border-radius: 4px;
    background-color: #fffaf0;
    color: #db7093;
    }

    /* è¨ˆç®—çµæœã®è¡¨ç¤ºã‚¨ãƒªã‚¢ */
    #resultText {
    background-color: #fffaf0;
    border: 1px solid #ffc0cb;
    color: #db7093;
    font-family: monospace;
    white-space: pre-wrap;
    text-align: left;
    height: 200px; /* é«˜ã•ã‚’å›ºå®š */
    overflow-y: scroll; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã« */
    }

    .input-table {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr; /* 2åˆ— */
    gap: 10px;
    }

    .input-table div {
    display: flex;
    flex-direction: column;
    justify-content: center;
    }

    @media (max-width: 768px) {
    table {
    display: block;
    width: 100%;
    overflow-x: auto;
    white-space: nowrap;
    }
    th, td {
    display: inline-block;
    width: 45%; /* 2åˆ—ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ç¶­æŒ */
    }
ã€€ã€€}


        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #ffe4e1;
        ã€€ã€€}
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff0f5;
            border-radius: 8px;
            border: 1px solid #ffc0cb;
            }
        h1 {
        text-align: center;
        color: #db7093;
        font-size: 1.3em; /* ã“ã“ã‚’è¿½åŠ  */
        }

        table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
            }
        table, th, td {
            border: 1px solid #ffc0cb;
             }
        th, td {
        font-size: 12px; /* æ–‡å­—ã‚’å°ã•ãã™ã‚‹ */
        padding: 4px; /* ä½™ç™½ã‚‚å°‘ã—èª¿æ•´ */
        line-height: 1.2;
        }

        .buttons {
            text-align: center;
            margin-top: 20px;
            }
        .buttons button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            background-color: #db7093;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            }
        .buttons button:hover {
            background-color: #ff69b4;
            }
        input[type="number"], select {
            width: 100%;
            padding: 8px;
            margin-top: 10px;
            border: 1px solid #ffc0cb;
            border-radius: 4px;
            background-color: #fffaf0;
            color: #db7093;
        }
        .highlight {
            font-weight: bold;
            color: #b22222;
        }

      /* ãƒœã‚¿ãƒ³ã‚ˆã‚Šä¸Šã®éƒ¨åˆ†ã ã‘æ–‡å­—ã‚’å°ã•ã */
      .container form {
      font-size: 0.9em;
      }

      /* å…¥åŠ›æ¬„ã¨ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®æ–‡å­—ã‚’ã•ã‚‰ã«å°ã•ã */
      .container form input[type="number"],
      .container form select,
      .container form label {
          font-size: 0.85em;
      }

      /* ãƒœã‚¿ãƒ³ã‚ˆã‚Šä¸‹ã®éƒ¨åˆ†ã¯å½±éŸ¿ã‚’å—ã‘ãªã„ */
      .container form + table {
          font-size: 1em;
      }

    </style>
</head>

<body>
    <div class="container">
        <h1></h1>
        <form id="profitCalculator">
            <label for="sellingPrice">è²©å£²ä¾¡æ ¼ï¼ˆUSDï¼‰:</label>
        <input type="number" id="sellingPrice" placeholder="0" required>
        <br><br>

        <!-- æ‰‹æ•°æ–™ç‡ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å‰Šé™¤ã—ã€è²©å£²ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®é¸æŠã®ã¿æ®‹ã™ -->
        <label for="platform">è²©å£²ã‚µã‚¤ãƒˆ:</label>
          <select id="platform">
              <option value="ebay_us">ebay USï¼ˆã‚¢ãƒ¡ãƒªã‚«ï¼‰</option>
              <option value="ebay_uk">ebay UKï¼ˆã‚¤ã‚®ãƒªã‚¹ï¼‰</option>
              <option value="ebay_au">ebay AUï¼ˆã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ï¼‰</option>
              <option value="ebay_other">ebay ãã®ä»–</option>
          </select>
          <br><br>


           <label for="shippingCost">ebayé€æ–™ï¼ˆUSDï¼‰:</label>
            <select id="shippingCost" required>
                <option value="10">âœˆï¸$10 ePacketï¼ˆ2kgã¾ã§ï¼‰</option>
                <option value="20">âœˆï¸$20 ePacketï¼ˆå¤§ã‚µã‚¤ã‚ºï¼‰</option>
                <option value="15">ğŸš€$15 EMSï¼ˆå°å‹ï¼‰</option>
                <option value="30">ğŸš€$30 EMSï¼ˆä¸­å‹ï¼‰</option>
                <option value="50">ğŸš€$50 EMSï¼ˆå¤§å‹ï¼‰</option>
                <option value="25">ğŸ“¦$25 DHLï¼ˆå°å‹ï¼‰</option>
                <option value="50">ğŸ“¦$50 DHLï¼ˆä¸­å‹ï¼‰</option>
                <option value="100">ğŸ“¦$100 DHLï¼ˆå¤§å‹ï¼‰</option>
                <option value="None">æ‰‹å…¥åŠ›ã™ã‚‹</option>
            </select>

            <input type="number" id="shippingCostHand" placeholder="0" style="display: none;" required>

            <br><br>
            <label>ä»•å…¥ã‚Œå€¤ï¼ˆé€šè²¨é¸æŠï¼‰:</label>
            <div>
                <input type="radio" id="costPriceJPY" name="costPriceCurrency" value="JPY" checked>
                <label for="costPriceJPY">å†† (JPY)</label>
                <input type="radio" id="costPriceUSD" name="costPriceCurrency" value="USD">
                <label for="costPriceUSD">ãƒ‰ãƒ« (USD)</label>
                <input type="radio" id="costPriceKRW" name="costPriceCurrency" value="KRW">
                <label for="costPriceKRW">ã‚¦ã‚©ãƒ³ (KRW)</label>
            </div>

            <input type="number" id="costPrice" placeholder="0" required>

            <br><br>
            <label>ä»•å…¥ã‚Œæ™‚é€æ–™ï¼ˆé€šè²¨é¸æŠï¼‰:</label>
            <div>
                <input type="radio" id="shippingCostJPY" name="shippingCostCurrency" value="JPY" checked>
                <label for="shippingCostJPY">å†† (JPY)</label>
                <input type="radio" id="shippingCostUSD" name="shippingCostCurrency" value="USD">
                <label for="shippingCostUSD">ãƒ‰ãƒ« (USD)</label>
                <input type="radio" id="shippingCostKRW" name="shippingCostCurrency" value="KRW">
                <label for="shippingCostKRW">ã‚¦ã‚©ãƒ³ (KRW)</label>
            </div>

            <input type="number" id="purchaseShippingCost" placeholder="0" required>
            <br><br>

            <label>ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆï¼ˆè‡ªå‹•æ›´æ–°ï¼‰:</label>
            <div>
                <span>USD â†’ JPY:</span>
                <input type="number" id="exchangeRateUSD" placeholder="110.0" step="any" readonly>
                <span>KRW â†’ JPY:</span>
                <input type="number" id="exchangeRateKRW" placeholder="0.1" step="any" readonly>
                <button type="button" id="updateRateButton">æœ€æ–°ãƒ¬ãƒ¼ãƒˆã«æ›´æ–°</button>
            </div>

            <br><br>

            <label>é–¢ç¨ç‡ï¼ˆ%ï¼‰:</label>
            <div>
            <input type="radio" id="customsDutyNone" name="customsDuty" value="None" checked>
            <label for="customsDutyNone">ãªã—</label>

            <input type="radio" id="customsDutyCustom" name="customsDuty" value="Custom">
            <label for="customsDutyCustom">å€‹åˆ¥å…¥åŠ›</label>
            <input type="number" id="customsRate" placeholder="ä¾‹ï¼š15" style="display: none;">
            </div>

          <div class="buttons">
          <button type="button" onclick="calculateProfit()">è¨ˆç®—ã™ã‚‹</button>
          <button type="reset">ãƒªã‚»ãƒƒãƒˆ</button>
          </div>

<!-- ã“ã“ã«è¨ˆç®—çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ -->
<textarea id="resultText" readonly rows="7"></textarea>
<button onclick="copyToClipboard()">ã‚³ãƒ”ãƒ¼</button>

<textarea id="copyText" readonly style="background-color: #fffaf0; border: 1px solid #ffc0cb; color: #db7093;">
ä»•å…¥ã‚Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã«ä¿å­˜ï¼‰

â‘  å•†å“ã‚¿ã‚¤ãƒˆãƒ«
æœ€åˆã«å•†å“ãŒä½•ã‹ã‚’æ˜ç¢ºã«ã—ã¦ãŠãã“ã¨ã§ã€å¾Œã®æƒ…å ±ãŒæ•´ç†ã•ã‚Œã‚„ã™ããªã‚Šã¾ã™ã€‚

â‘¡ æ¤œç´¢å…¨ä½“ç”»é¢URL
URLã‚’æœ€åˆã«ã¾ã¨ã‚ã¦ãŠãã“ã¨ã§ã€å¾Œã§è¦‹è¿”ã™æ™‚ã«ã™ãã«æ¤œç´¢ãƒšãƒ¼ã‚¸ã«æˆ»ã‚Œã‚‹ã‚ˆã†ã«ã€‚
â–¼å®Œå£²ã€æ–°ç€é †
		
â–¼è²©å£²ä¸­ã€æœ€æ–°é †

â‘¢ è¨ˆç®—çµæœã®ã‚³ãƒ”ãƒš
åˆ©ç›Šé¡ã‚’å…ˆã«ç¢ºèªã™ã‚‹ã“ã¨ã§ã€ä»•å…¥ã‚Œã‚‹ã‹ã©ã†ã‹ã®åˆ¤æ–­ãŒã—ã‚„ã™ããªã‚‹ã€‚

â‘£ ä»•å…¥ã‚Œã‚‹ç¨®é¡ãƒ»å€‹æ•°
åˆ©ç›Šã‚’ç¢ºèªã—ãŸå¾Œã«ã€ã©ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã„ãã¤ä»•å…¥ã‚Œã‚‹ã‹ã‚’æ±ºå®šã€‚

â‘¤ ãƒ¡ãƒ¢
ç«¶åˆçŠ¶æ³ã‚„ä¾¡æ ¼å¤‰å‹•ã®ç†ç”±ã€å­£ç¯€æ€§ãªã©ã®æ°—ã¥ãã‚’ãƒ¡ãƒ¢ã€‚åˆ¤æ–­æ ¹æ‹ ã‚’æ˜ç¢ºã«ã™ã‚‹ã€‚

â‘¥ ä»•å…¥ã‚Œå…ˆãƒšãƒ¼ã‚¸URL
æœ€å¾Œã«å®Ÿéš›ã®ä»•å…¥ã‚Œã‚’è¡Œã†ãƒšãƒ¼ã‚¸ã«ã™ãé£›ã¹ã‚‹ã‚ˆã†ã«ã€‚
</textarea>
<button onclick="copyToClipboard('copyText')">ã‚³ãƒ”ãƒ¼</button>

        </form>

        <table>
    <tr>
        <th>é …ç›®</th><th>å€¤</th>
    </tr>
    <tr>
        <td>ebayè²©å£²ä¾¡æ ¼ (USD)</td>
        <td id="displaySellingPrice">-</td>
    </tr>
    <tr>
        <td>ebayæ‰‹æ•°æ–™ (USD)</td>
        <td id="displayCommission">-</td>
    </tr>
    <tr>
        <td>ebayé€æ–™ (USD)</td>
        <td id="displayShippingCost">-</td>
    </tr>
    <tr>
        <td>ä»•å…¥ã‚Œå€¤ (JPY/USD)</td>
        <td id="displayCostPrice">-</td>
    </tr>
    <tr>
        <td>ä»•å…¥ã‚Œæ™‚é€æ–™ (JPY/USD)</td>
        <td id="displayPurchaseShippingCost">-</td>
    </tr>
    <tr>
        <td>é–¢ç¨ (JPY/USD)</td>
        <td id="displayCustomsDuty">-</td>
    </tr>
    <tr>
        <td><strong>åˆ©ç›Š (JPY/USD)</strong></td>
        <td id="displayProfit" class="highlight">-</td>
    </tr>
    <tr>
        <td><strong>åˆ©ç›Šç‡ (%)</strong></td>
        <td id="displayProfitRate" class="highlight">-</td>
    </tr>
</table>

    </div>

</body>
    <script>

    async function calculateProfit() {
    console.log("calculateProfit() é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã—ãŸ"); // âœ… å‘¼ã³å‡ºã—ç¢ºèª

    // costPriceCurrency ã®å®šç¾© (null ã‚¨ãƒ©ãƒ¼å›é¿)
    const costPriceCurrencyElement = document.querySelector('input[name="costPriceCurrency"]:checked');
    const costPriceCurrency = costPriceCurrencyElement
        ? costPriceCurrencyElement.value
        : "JPY"; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ JPY ã«è¨­å®š
    console.log("ä»•å…¥ã‚Œå€¤ã®é€šè²¨ (costPriceCurrency):", costPriceCurrency); // âœ… ç¢ºèªç”¨

    // ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã®å–å¾—ï¼ˆ1ç®‡æ‰€ã«çµ±ä¸€ï¼‰
    let exchangeRateUSD = parseFloat(document.getElementById('exchangeRateUSD').value) || 110.00;
    let exchangeRate = parseFloat(document.getElementById('exchangeRateKRW').value) || 0.1;
    console.log("ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ (exchangeRateUSD):", exchangeRateUSD);

    // è²©å£²ä¾¡æ ¼ã®å–å¾—
    const sellingPrice = parseFloat(document.getElementById('sellingPrice').value) || 0;
    console.log("è²©å£²ä¾¡æ ¼ (sellingPrice):", sellingPrice);

    // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®å–å¾—
    const selectedPlatform = document.getElementById('platform').value;

    // æ‰‹æ•°æ–™ã®è¨ˆç®—
    const commissionRate = (platformFees[selectedPlatform] || 0) / 100;
    const commission = sellingPrice * commissionRate;
    console.log("è²©å£²æ‰‹æ•°æ–™ (commission):", commission);

    // é€æ–™ã®å–å¾—
    let shippingCost = parseFloat(document.getElementById('shippingCost').value) || 0;
    const shippingCostHand = parseFloat(document.getElementById('shippingCostHand').value) || 0;
    if (document.getElementById('shippingCost').value === "None") {
        shippingCost = shippingCostHand;
    }
    console.log("é€æ–™ (shippingCost):", shippingCost);

    // ä»•å…¥ã‚Œå€¤ (USD) ã®è¨ˆç®—
    const costPrice = parseFloat(document.getElementById('costPrice').value) || 0;
    const costPriceUSD = costPriceCurrency === "USD"
        ? costPrice
        : costPriceCurrency === "JPY"
        ? (costPrice / exchangeRateUSD)
        : (costPrice * exchangeRate);
    console.log("ä»•å…¥ã‚Œå€¤ (costPriceUSD):", costPriceUSD);

    // purchaseShippingCostCurrency ã®å®šç¾© (null ã‚¨ãƒ©ãƒ¼å›é¿)
    const purchaseShippingCostCurrencyElement = document.querySelector('input[name="shippingCostCurrency"]:checked');
    const purchaseShippingCostCurrency = purchaseShippingCostCurrencyElement
        ? purchaseShippingCostCurrencyElement.value
        : "JPY"; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ JPY ã«è¨­å®š
    console.log("ä»•å…¥ã‚Œæ™‚é€æ–™ã®é€šè²¨ (purchaseShippingCostCurrency):", purchaseShippingCostCurrency); // âœ… ç¢ºèªç”¨

    // ä»•å…¥ã‚Œæ™‚é€æ–™ (USD) ã®è¨ˆç®—
    const purchaseShippingCost = parseFloat(document.getElementById('purchaseShippingCost').value) || 0;
    const purchaseShippingCostUSD = purchaseShippingCostCurrency === "USD"
        ? purchaseShippingCost
        : purchaseShippingCostCurrency === "JPY"
        ? (purchaseShippingCost / exchangeRateUSD)
        : (purchaseShippingCost * exchangeRate);
    console.log("ä»•å…¥ã‚Œæ™‚é€æ–™ (purchaseShippingCostUSD):", purchaseShippingCostUSD); // âœ… é€æ–™ã®ç¢ºèª

    // é–¢ç¨ã®è¨ˆç®—
    const customsDutyRate = document.querySelector('input[name="customsDuty"]:checked').value === "Custom"
        ? parseFloat(document.getElementById('customsRate').value) / 100
        : 0;
    const customsDutyPrice = costPriceUSD * customsDutyRate;
    const customsDutyPriceUSD = customsDutyPrice / exchangeRateUSD;
    console.log("é–¢ç¨ (customsDutyPriceUSD):", customsDutyPriceUSD);

    // åˆ©ç›Šã®è¨ˆç®—
    const profitUSD = (sellingPrice - commission - shippingCost - costPriceUSD - purchaseShippingCostUSD - customsDutyPriceUSD);
    console.log("åˆ©ç›Š (profitUSD):", profitUSD);

    const profitInJPY = profitUSD * exchangeRateUSD;
    const profitRate = sellingPrice > 0 ? (profitUSD / sellingPrice) * 100 : 0;

    // æ”¹è¡Œã‚’ä¿æŒã—ã¦è¨ˆç®—çµæœã‚’è¡¨ç¤º
    const resultText =
    `ã€è¨ˆç®—çµæœã€‘
    ----------------------------
    è²©å£²ä¾¡æ ¼ï¼š${sellingPrice.toFixed(2)} USD
    è²©å£²æ‰‹æ•°æ–™ï¼š${commission.toFixed(2)} USD
    é€æ–™ï¼š${shippingCost.toFixed(2)} USD
    ä»•å…¥ã‚Œå€¤ï¼š${costPriceUSD.toFixed(2)} USD
    ä»•å…¥ã‚Œæ™‚é€æ–™ï¼š${purchaseShippingCostUSD.toFixed(2)} USD
    é–¢ç¨ï¼š${customsDutyPriceUSD.toFixed(2)} USD
     ----------------------------
    ã€åˆ©ç›Šé¡ãƒ»åˆ©ç›Šç‡ã€‘
    åˆ©ç›Šé¡ï¼š${profitUSD.toFixed(2)} USD / ${profitInJPY.toFixed(0)} JPY
    åˆ©ç›Šç‡ï¼š${profitRate.toFixed(2)} %
     ----------------------------
    ã€ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã€‘
    USD â†’ JPYï¼š${exchangeRateUSD}
   ----------------------------
    `;
    document.getElementById('resultText').value = resultText;

        // ğŸ“Š è¡¨ã«è¨ˆç®—çµæœã‚’åæ˜ ã™ã‚‹
    document.getElementById('displaySellingPrice').textContent = sellingPrice.toFixed(2) + " USD";
    document.getElementById('displayCommission').textContent = commission.toFixed(2) + " USD";
    document.getElementById('displayShippingCost').textContent = shippingCost.toFixed(2) + " USD";
    document.getElementById('displayCostPrice').textContent = costPriceUSD.toFixed(2) + " USD";
    document.getElementById('displayPurchaseShippingCost').textContent = purchaseShippingCostUSD.toFixed(2) + " USD";
    document.getElementById('displayCustomsDuty').textContent = customsDutyPriceUSD.toFixed(2) + " USD";
    document.getElementById('displayProfit').textContent = profitUSD.toFixed(2) + " USD / " + profitInJPY.toFixed(0) + " JPY";
    document.getElementById('displayProfitRate').textContent = profitRate.toFixed(2) + " %";
}

           // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹é–¢æ•°
           function copyToClipboard(elementId = "resultText") {
           const copyText = document.getElementById(elementId);

            // `readonly` ã‚’ä¸€æ™‚çš„ã«è§£é™¤
            const isReadonly = copyText.hasAttribute("readonly");
            if (isReadonly) {
                copyText.removeAttribute("readonly");
            }

            // ã‚³ãƒ”ãƒ¼å‡¦ç†
            copyText.select();
            copyText.setSelectionRange(0, 99999); // ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ

            try {
                navigator.clipboard.writeText(copyText.value).then(() => {
                    alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
                }).catch(err => {
                    console.error("navigator.clipboard ãŒä½¿ãˆã¾ã›ã‚“", err);
                    document.execCommand("copy");
                    alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‹•ä½œï¼‰");
                });
            } catch (err) {
                console.error("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ", err);
                alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ");
            }

            // ã‚³ãƒ”ãƒ¼å¾Œã« `readonly` ã‚’æˆ»ã™
            if (isReadonly) {
                copyText.setAttribute("readonly", "true");
            }
        }


// ebayã®æ‰‹æ•°æ–™ç‡ï¼ˆ%ï¼‰
const platformFees = {
    ebay_us: 13.25,      // ebay US
    ebay_uk: 13.9,       // ebay UK
    ebay_au: 13.4,       // ebay AU
    ebay_other: 14.35    // ebay ãã®ä»–
};

// ebay US ã®é€æ–™ã‚’ USD è¡¨ç¤ºã«çµ±ä¸€
const platformShipping = {
    ebay_us: [
        { value: 10, text: "âœˆï¸$10 ePacketï¼ˆ2kgã¾ã§ï¼‰" },
        { value: 20, text: "ğŸš€$20 EMSï¼ˆå°å‹ï¼‰" },
        { value: 50, text: "ğŸ“¦$50 DHLï¼ˆä¸­å‹ï¼‰" },
        { value: 100, text: "ğŸ“¦$100 DHLï¼ˆå¤§å‹ï¼‰" },
        { value: "None", text: "æ‰‹å…¥åŠ›ã™ã‚‹" }
    ],
    ebay_uk: [
        { value: 15, text: "âœˆï¸Â£15 ePacketï¼ˆ2kgã¾ã§ï¼‰" },
        { value: 30, text: "ğŸš€Â£30 EMSï¼ˆä¸­å‹ï¼‰" },
        { value: 60, text: "ğŸ“¦Â£60 DHLï¼ˆå¤§å‹ï¼‰" },
        { value: "None", text: "æ‰‹å…¥åŠ›ã™ã‚‹" }
    ]
};
        async function fetchExchangeRates() {
    ã€€ã€€try {
        const response = await fetch('https://open.er-api.com/v6/latest/USD');
        const data = await response.json();

        // USD â†’ JPY
        const exchangeRateUSD = data.rates.JPY;
        document.getElementById("exchangeRateUSD").value = exchangeRateUSD.toFixed(4);

        // KRW â†’ JPY
        const responseKRW = await fetch('https://open.er-api.com/v6/latest/KRW');
        const dataKRW = await responseKRW.json();
        const exchangeRateKRW = dataKRW.rates.JPY;
        document.getElementById("exchangeRateKRW").value = exchangeRateKRW.toFixed(4);

        } catch (error) {
        console.error("ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ", error);
        alert("ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        }
}

// æ›´æ–°ãƒœã‚¿ãƒ³ã§æ‰‹å‹•æ›´æ–°
document.getElementById("updateRateButton").addEventListener("click", fetchExchangeRates);

// é–¢ç¨ç‡ã®å…¥åŠ›æ¬„ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’åˆ¶å¾¡
document.querySelectorAll('input[name="customsDuty"]').forEach((radio) => {
    radio.addEventListener("change", function() {
        const customsRateInput = document.getElementById("customsRate");

        if (document.getElementById("customsDutyCustom").checked) {
            customsRateInput.style.display = 'block'; // å€‹åˆ¥å…¥åŠ›ã‚’é¸ã‚“ã ã‚‰è¡¨ç¤º
            customsRateInput.required = true;
        } else {
            customsRateInput.style.display = 'none';  // ãªã—ã‚’é¸ã‚“ã ã‚‰éè¡¨ç¤º
            customsRateInput.value = "";              // å€¤ã‚’ã‚¯ãƒªã‚¢
            customsRateInput.required = false;
        }
    });
});

ã€€ã€€// ä»•å…¥ã‚Œå€¤ (USD) ã®è¨ˆç®—
    const costPriceUSD = costPriceCurrency === "USD"
    ? costPrice
    : costPriceCurrency === "JPY"
    ? (costPrice / exchangeRateUSD)
    : (costPrice * exchangeRate);
    console.log("ä»•å…¥ã‚Œå€¤ (costPriceUSD):", costPriceUSD); // âœ… ä»•å…¥ã‚Œå€¤ã®ç¢ºèª

ã€€  // purchaseShippingCostCurrency ã®å®šç¾© (null ã‚¨ãƒ©ãƒ¼å›é¿)
    const purchaseShippingCostCurrencyElement = document.querySelector('input[name="shippingCostCurrency"]:checked');
    const purchaseShippingCostCurrency = purchaseShippingCostCurrencyElement
    ? purchaseShippingCostCurrencyElement.value
    : "JPY"; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ JPY ã«è¨­å®š
    console.log("ä»•å…¥ã‚Œæ™‚é€æ–™ã®é€šè²¨ (purchaseShippingCostCurrency):", purchaseShippingCostCurrency); // âœ… ç¢ºèªç”¨

    // ä»•å…¥ã‚Œæ™‚é€æ–™ (USD) ã®è¨ˆç®—
    const purchaseShippingCostUSD = purchaseShippingCostCurrency === "USD"
    ? purchaseShippingCost
    : purchaseShippingCostCurrency === "JPY"
    ? (purchaseShippingCost / exchangeRateUSD)
    : (purchaseShippingCost * exchangeRate);
    console.log("ä»•å…¥ã‚Œæ™‚é€æ–™ (purchaseShippingCostUSD):", purchaseShippingCostUSD); // âœ… é€æ–™ã®ç¢ºèª

    // é–¢ç¨ (USD) ã®è¨ˆç®—
    const customsDutyPriceUSD = customsDutyPrice / exchangeRateUSD;

ã€€ã€€document.addEventListener("DOMContentLoaded", function () {
    // å¿…è¦ãªè¦ç´ ã‚’ã™ã¹ã¦å–å¾—
    const sellingPrice = parseFloat(document.getElementById('sellingPrice').value) || 0;
    const shippingCost = parseFloat(document.getElementById('shippingCost').value) || 0;
    const exchangeRateUSD = parseFloat(document.getElementById('exchangeRateUSD').value) || 110.00;
    const sellingPriceJPY = sellingPrice * exchangeRateUSD;
    const shippingCostJPY = shippingCost * exchangeRateUSD;
    console.log("è²©å£²ä¾¡æ ¼ (sellingPriceJPY):", sellingPriceJPY);
    console.log("é€æ–™ (shippingCostJPY):", shippingCostJPY);

    // shippingCostHandInput ã¨ shippingCostSelect ã®å–å¾—
    const shippingCostHandInput = document.getElementById('shippingCostHand');
    const shippingCostSelect = document.getElementById('shippingCost');

    // åˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤º
    shippingCostHandInput.style.display = 'none';

    // é€æ–™é¸æŠæ™‚ã®å‹•ä½œ
    shippingCostSelect.addEventListener('change', function () {
    if (shippingCostSelect.value === "None") {
        shippingCostHandInput.style.display = 'block';
        shippingCostHandInput.required = true; // æ‰‹å…¥åŠ›ã‚’å¿…é ˆã«è¨­å®š
    } else {
        shippingCostHandInput.style.display = 'none';
        shippingCostHandInput.required = false; // æ‰‹å…¥åŠ›ã‚’è§£é™¤
    }
    });
});

</script>
</html>
